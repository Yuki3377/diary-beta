<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>写メ日記AI</title>

<style>
:root{
  --bg:#fff4f8;
  --card:#ffffff;
  --accent:#ff5fa2;
  --accent-soft:#ffd6e8;
  --text:#444;
  --radius:18px;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.wrapper{
  max-width:520px;
  margin:40px auto;
  padding:20px;
}

h1{
  text-align:center;
  margin-bottom:20px;
}

.card{
  background:var(--card);
  padding:18px;
  border-radius:var(--radius);
  margin-bottom:15px;
  box-shadow:0 8px 20px rgba(255,95,162,0.08);
}

select,input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #eee;
  margin-top:8px;
  font-size:14px;
}

button.primary{
  width:100%;
  padding:14px;
  border:none;
  border-radius:25px;
  background:linear-gradient(135deg,#ff5fa2,#ff85b3);
  color:white;
  cursor:pointer;
  font-size:15px;
}

.result{
  margin-top:20px;
  padding:20px;
  background:var(--accent-soft);
  border-radius:var(--radius);
  white-space:pre-wrap;
  display:none;
}
</style>
</head>

<body>

<div class="wrapper">

<h1>写メ日記 AI</h1>

<div class="card">
<label>名前</label>
<input id="name">
</div>

<div class="card">
<label>自分の呼び方</label>
<input id="selfCall">
</div>

<div class="card">
<label>お客様の呼び方</label>
<input id="customerCall">
</div>

<div class="card">
<label>年齢</label>
<select id="age">
<option>20代</option>
<option>30代</option>
<option>40代</option>
<option>50代</option>
</select>
</div>

<div class="card">
<label>キャラクター</label>
<select id="character">
<option>妹系</option>
<option>小悪魔系</option>
<option>清楚系</option>
<option>お姉さん系</option>
<option>人妻系</option>
</select>
</div>

<div class="card">
<label>感情</label>
<select id="mood">
<option>甘えたい</option>
<option>ムラムラしている</option>
<option>寂しい</option>
<option>ご機嫌</option>
<option>イチャイチャしたい</option>
</select>
</div>

<div class="card">
<label>日記の状況</label>
<select id="situation">
<option>出勤前（当日）</option>
<option>待機中</option>
<option>明日出勤</option>
<option>退勤</option>
</select>
</div>

<div class="card">
<label>題名</label>
<input id="title">
</div>

<button class="primary" onclick="generate()">生成する</button>

<div class="result" id="result"></div>

</div>

<script>

/* ======================
   保存機能
====================== */

function saveProfile(){
  const data={
    name:document.getElementById("name").value,
    selfCall:document.getElementById("selfCall").value,
    customerCall:document.getElementById("customerCall").value,
    age:document.getElementById("age").value,
    character:document.getElementById("character").value
  };
  localStorage.setItem("diaryProfile",JSON.stringify(data));
}

function loadProfile(){
  const saved=localStorage.getItem("diaryProfile");
  if(!saved) return;

  const data=JSON.parse(saved);

  document.getElementById("name").value=data.name||"";
  document.getElementById("selfCall").value=data.selfCall||"";
  document.getElementById("customerCall").value=data.customerCall||"";
  document.getElementById("age").value=data.age||"20代";
  document.getElementById("character").value=data.character||"妹系";
}

/* ======================
   キャラ別語尾
====================== */

function characterTone(character){

  const toneMap={
    "妹系":{
      intro:["ねえねえ…","ちょっと聞いて？"],
      ending:["待ってるね？","来てくれるよね？"]
    },
    "小悪魔系":{
      intro:["ふーん…","どうする？"],
      ending:["来ないと後悔するかもよ？","ちゃんと来てね？"]
    },
    "清楚系":{
      intro:["少しだけ…","今日はちょっと…"],
      ending:["お誘いお待ちしています。","お時間あればぜひ。"]
    },
    "お姉さん系":{
      intro:["ほら、","今日はね、"],
      ending:["癒してあげる。","待ってるわ。"]
    },
    "人妻系":{
      intro:["内緒だけど、","ちょっとだけ…"],
      ending:["ちゃんと時間作ってね。","わかってるわよね？"]
    }
  };

  return toneMap[character];
}

/* ======================
   生成
====================== */

function generate(){

  saveProfile();

  const customer=document.getElementById("customerCall").value || "お兄さん";
  const mood=document.getElementById("mood").value;
  const situation=document.getElementById("situation").value;
  const character=document.getElementById("character").value;
  const title=document.getElementById("title").value;

  if(!title){
    alert("題名は必須です");
    return;
  }

  const tone=characterTone(character);

  const intro=tone.intro[Math.floor(Math.random()*tone.intro.length)];
  const ending=tone.ending[Math.floor(Math.random()*tone.ending.length)];

  const text=`${title}

${intro}

${situation}で、ちょっと${mood}。

${customer}どうする？

${ending}`;

  const result=document.getElementById("result");
  result.innerText=text;
  result.style.display="block";
}

/* ======================
   初期読み込み
====================== */

window.onload=function(){
  loadProfile();

  ["name","selfCall","customerCall","age","character"].forEach(id=>{
    document.getElementById(id).addEventListener("change",saveProfile);
  });
};

</script>

</body>
</html>
