<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>プロフィール登録</title>

<style>
*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff4f8;
}

.wrapper{
  max-width:520px;
  margin:40px auto;
  padding:20px;
}

.card{
  background:#fff;
  padding:18px;
  border-radius:18px;
  margin-bottom:15px;
  box-shadow:0 8px 20px rgba(255,95,162,0.08);
}

label{
  font-size:14px;
  display:block;
  margin-top:10px;
}

input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid #eee;
  margin-top:6px;
  font-size:16px; /* 自動ズーム防止 */
}

.button-group{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:10px;
}

.btn{
  padding:8px 14px;
  border-radius:20px;
  border:1px solid #ffb6d2;
  background:#fff;
  font-size:13px;
  cursor:pointer;
  transition:0.2s;
}

.btn.active{
  background:#ff85b3;
  color:#fff;
  border:1px solid #ff85b3;
}

.sameBtn{
  margin-top:4px; /* 少し上に調整 */
  font-size:12px;
  padding:6px 12px;
}

.updateBtn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:25px;
  background:linear-gradient(135deg,#ff5fa2,#ff85b3);
  color:#fff;
  font-size:14px;
  margin-top:20px;
}

.toast{
  position:fixed;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  background:#ff85b3;
  color:#fff;
  padding:12px 20px;
  border-radius:20px;
  font-size:14px;
  opacity:0;
  transition:0.3s;
}
</style>
</head>

<body>

<div class="wrapper">

<h2>プロフィール登録</h2>

<div class="card">
<label>源氏名</label>
<input id="name">

<button class="btn sameBtn" onclick="copyName()">源氏名と同じ</button>

<label>自分の呼び方</label>
<input id="selfCall">

<label>お客様の呼び方</label>
<input id="customerCall">
</div>

<div class="card">
<label>年齢</label>
<div class="button-group" id="ageGroup"></div>
</div>

<div class="card">
<label>キャラクター</label>
<div class="button-group" id="charGroup"></div>
</div>

<button class="updateBtn" onclick="saveProfile()">更新する</button>

</div>

<div id="toast" class="toast">更新しました</div>

<script>

const ages=["10代","20代","30代","40代","50代"];
const characters=["妹系","小悪魔系","清楚系","お姉さん系","人妻系","熟女"];

function createButtons(list,id){
  const group=document.getElementById(id);
  list.forEach(item=>{
    const btn=document.createElement("button");
    btn.className="btn";
    btn.innerText=item;
    btn.onclick=()=>{
      if(btn.classList.contains("active")){
        btn.classList.remove("active"); // 再タップで解除
      }else{
        [...group.children].forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
      }
    };
    group.appendChild(btn);
  });
}

function copyName(){
  const name=document.getElementById("name").value;
  if(name){
    document.getElementById("selfCall").value=name;
  }
}

function getActive(id){
  const active=document.querySelector(`#${id} .active`);
  return active ? active.innerText : "";
}

function saveProfile(){
  const profile={
    name:document.getElementById("name").value,
    selfCall:document.getElementById("selfCall").value,
    customerCall:document.getElementById("customerCall").value,
    age:getActive("ageGroup"),
    character:getActive("charGroup"),
    traits:[]
  };

  localStorage.setItem("profile",JSON.stringify(profile));
  showToast();
}

function showToast(){
  const toast=document.getElementById("toast");
  toast.style.opacity="1";
  setTimeout(()=>{ toast.style.opacity="0"; },1500);
}

window.onload=function(){
  createButtons(ages,"ageGroup");
  createButtons(characters,"charGroup");
};

</script>

</body>
</html>
