<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>プロフィール登録</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:#fff4f8;
}

.wrapper{
  max-width:520px;
  margin:40px auto;
  padding:20px;
  animation:fadeUp .4s ease;
}

@keyframes fadeUp{
  from{opacity:0; transform:translateY(10px);}
  to{opacity:1; transform:translateY(0);}
}

.header{
  margin-bottom:20px;
}

.title{
  font-size:20px;
  font-weight:700;
  margin:0 0 6px;
}

.subtitle{
  font-size:13px;
  color:#888;
  margin:0;
}

.card{
  background:#fff;
  padding:18px;
  border-radius:18px;
  margin-bottom:15px;
  box-shadow:0 8px 20px rgba(255,95,162,0.08);
}

.card h2{
  font-size:14px;
  margin:0 0 12px;
}

input{
  width:100%;
  padding:10px 12px;
  font-size:14px;
  border-radius:12px;
  border:1px solid #eee;
  margin-bottom:10px;
  outline:none;
  box-sizing:border-box;
}

input:focus{
  border-color:#ff85b3;
}

.short-row{
  display:flex;
  align-items:center;
  gap:10px;
}

.short-row input{
  flex:1;
  max-width:200px;
}

.same-btn{
  padding:8px 14px;
  border-radius:20px;
  border:1px solid #ffb6d2;
  background:#fff;
  font-size:12px;
  cursor:pointer;
}

.same-btn:active{
  background:#ff85b3;
  color:#fff;
  border:1px solid #ff85b3;
}

.button-group{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

.btn{
  padding:8px 14px;
  border-radius:20px;
  border:1px solid #ffb6d2;
  font-size:13px;
  background:#fff;
  cursor:pointer;
}

.btn.active{
  background:#ff85b3;
  color:#fff;
  border:1px solid #ff85b3;
}

.save-toast{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  background:#ff85b3;
  color:#fff;
  padding:8px 16px;
  border-radius:25px;
  font-size:12px;
  opacity:0;
  transition:.3s ease;
}
</style>
</head>

<body>

<div class="wrapper">

  <div class="header">
    <h1 class="title">プロフィール登録</h1>
    <p class="subtitle">変更はいつでも出来ます。</p>
  </div>

  <div class="card">
    <h2>基本情報</h2>
    <input type="text" id="name" placeholder="源氏名">

    <div class="short-row">
      <input type="text" id="selfCall" placeholder="自分の呼び方">
      <button class="same-btn" onclick="copyName()">源氏名と同じ</button>
    </div>

    <input type="text" id="customerCall" placeholder="お客様の呼び方（お兄さん・紳士の方）">
  </div>

  <div class="card">
    <h2>年齢</h2>
    <div class="button-group" id="ageGroup">
      <div class="btn">10代</div>
      <div class="btn">20代</div>
      <div class="btn">30代</div>
      <div class="btn">40代</div>
      <div class="btn">50代</div>
    </div>
  </div>

  <div class="card">
    <h2>キャラクター</h2>
    <div class="button-group" id="charGroup">
      <div class="btn">妹系</div>
      <div class="btn">小悪魔系</div>
      <div class="btn">清楚系</div>
      <div class="btn">お姉さん系</div>
      <div class="btn">人妻系</div>
      <div class="btn">熟女</div>
    </div>
  </div>

  <div class="card">
    <h2>個性（最大で3つ選択可）</h2>
    <div class="button-group" id="traitGroup">
      <div class="btn">S気質</div>
      <div class="btn">M気質</div>
      <div class="btn">甘え体質</div>
      <div class="btn">寂しがり</div>
      <div class="btn">痴女</div>
      <div class="btn">巨乳</div>
      <div class="btn">グラマー</div>
      <div class="btn">大人の色気</div>
      <div class="btn">ちょっぴり挑発的</div>
      <div class="btn">ツンデレ</div>
      <div class="btn">恥ずかしがり</div>
      <div class="btn">密着好き</div>
      <div class="btn">聞き上手</div>
      <div class="btn">かまってちゃん</div>
    </div>
  </div>

</div>

<div id="saveToast" class="save-toast">✓ 保存しました</div>

<script>

window.onload=function(){
  const profile=JSON.parse(localStorage.getItem("profile"))||{};
  name.value=profile.name||"";
  selfCall.value=profile.selfCall||"";
  customerCall.value=profile.customerCall||"";
  restoreSingle("ageGroup",profile.age);
  restoreSingle("charGroup",profile.character);
  restoreMulti("traitGroup",profile.traits||[]);
};

function copyName(){
  selfCall.value=name.value;
  saveProfile();
}

document.querySelectorAll("input").forEach(input=>{
  input.addEventListener("input",saveProfile);
});

function saveProfile(){
  const profile={
    name:name.value,
    selfCall:selfCall.value,
    customerCall:customerCall.value,
    age:getSingle("ageGroup"),
    character:getSingle("charGroup"),
    traits:getMulti("traitGroup")
  };
  localStorage.setItem("profile",JSON.stringify(profile));
  showToast();
}

function setupSingle(groupId){
  const group=document.getElementById(groupId);
  group.querySelectorAll(".btn").forEach(btn=>{
    btn.onclick=()=>{
      group.querySelectorAll(".btn").forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      saveProfile();
    };
  });
}

function setupMulti(groupId,max){
  const group=document.getElementById(groupId);
  group.querySelectorAll(".btn").forEach(btn=>{
    btn.onclick=()=>{
      const active=group.querySelectorAll(".active");
      if(!btn.classList.contains("active")&&active.length>=max){
        alert("最大3つまでです");
        return;
      }
      btn.classList.toggle("active");
      saveProfile();
    };
  });
}

function getSingle(groupId){
  const active=document.querySelector(`#${groupId} .active`);
  return active?active.textContent:"";
}

function getMulti(groupId){
  return Array.from(document.querySelectorAll(`#${groupId} .active`))
    .map(b=>b.textContent);
}

function restoreSingle(groupId,value){
  if(!value)return;
  document.querySelectorAll(`#${groupId} .btn`).forEach(btn=>{
    if(btn.textContent===value)btn.classList.add("active");
  });
}

function restoreMulti(groupId,values){
  document.querySelectorAll(`#${groupId} .btn`).forEach(btn=>{
    if(values.includes(btn.textContent))btn.classList.add("active");
  });
}

function showToast(){
  const toast=document.getElementById("saveToast");
  toast.style.opacity="1";
  setTimeout(()=>{toast.style.opacity="0";},1000);
}

setupSingle("ageGroup");
setupSingle("charGroup");
setupMulti("traitGroup",3);

</script>

</body>
</html>
